функции целесоббразно создавать 
- если необходимо часто производить определенную последовательнойсть действий
- делать последовательность запросов зависящую от параметров



курсор
- инкапсулирует запрос и выдает строки по несколько за раз
- экономит память

cur1 refcursor
имя [ [ NO ] SCROLL ] CURSOR [ ( аргументы ) ] FOR запрос;

OPEN несвязанная_переменная_курсора [[NO] SCROLL] FOR запрос;
OPEN несвязанная_переменная_курсора [[NO] SCROLL] FOR EXECUTE строка_запроса
                                     [USING выражение [, ...]];
OPEN связанная_переменная_курсора [( [имя_аргумента :=] значение_аргумента [, ...] )];

FETCH [направление { FROM | IN }] курсор INTO цель;  
MOVE [направление { FROM | IN }] курсор;
    направление - NEXT, PRIOR, FIRST, LAST, ABSOLUTE число, RELATIVE число, FORWARD, BACKWARD
UPDATE таблица SET ... WHERE CURRENT OF курсор;
DELETE FROM таблица WHERE CURRENT OF курсор;
CLOSE курсор;


    
циклы
loop - безусловный цикл до команды exit
while

[<<метка>>]
FOR имя IN [REVERSE] выражение .. выражение [BY выражение] LOOP
    операторы
END LOOP [ метка ];

[ <<метка>> ]
FOR цель IN запрос LOOP
    операторы
END LOOP [ метка ];

[ <<метка>> ]
FOR цель IN EXECUTE выражение_проверки [ USING выражение [, ... ] ] LOOP
    операторы
END LOOP [ метка ];

[ <<метка>> ]
FOREACH цель [ SLICE число ] IN ARRAY выражение LOOP
    операторы
END LOOP [ метка ];

foreach